(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["faction"],{"6eb8":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-container",{attrs:{fluid:""}},[o("b-row",[o("b-col",{attrs:{xs:"12",lg:"6"}},[o("b-card",{attrs:{"no-body":"","bg-variant":"light"}},[o("b-card-body",[o("FactionForm",{attrs:{id:e.selected_id,axios:{url:"faction"},"blank-form":e.form},on:{cancel:e.onCancel,submit:e.onSubmit,remove:e.onRemove}})],1)],1)],1),o("b-col",[o("b-card",{attrs:{"no-body":"","bg-variant":"light"},scopedSlots:e._u([{key:"header",fn:function(){return[o("b-form-group",{staticClass:"m-0 p-0"},[o("b-form-input",{model:{value:e.tableFilter,callback:function(t){e.tableFilter=t},expression:"tableFilter"}})],1),o("b-form-group",{staticClass:"m-0 p-0"},[o("b-button",{attrs:{block:""},on:{click:function(t){return e.selectRandom()}}},[e._v("Random!")])],1)]},proxy:!0}])},[o("b-card-body",[o("ZTable",{ref:"ztable",attrs:{axios:e.axios,fields:e.fields,"sticky-header":"750px","no-border-collapse":!0,filter:e.tableFilter},on:{"row-selected":e.onRowSelected}})],1)],1)],1)],1),o("b-modal",{attrs:{size:"lg",scrollable:"","hide-header":"",id:"info-modal","hide-footer":""}},[o("div",{domProps:{innerHTML:e._s(e.faction_info)}})])],1)},n=[],a=(o("caad"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.onSubmit(t)},change:function(t){return t.stopPropagation(),t.preventDefault(),e.onChange(t)}}},[o("div",{staticClass:"text-right mb-1"},[o("b-form-checkbox",{model:{value:e.form.prep,callback:function(t){e.$set(e.form,"prep",t)},expression:"form.prep"}},[e._v("prep")]),o("b-form-checkbox",{model:{value:e.form.claimed,callback:function(t){e.$set(e.form,"claimed",t)},expression:"form.claimed"}},[e._v("claimed")])],1),o("b-form-group",[o("label",{staticClass:"float-left",attrs:{for:"input-name"}},[e._v("Name")]),o("b-form-textarea",{attrs:{id:"input-name",rows:"2"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("b-form-group",[o("label",{staticClass:"float-left",attrs:{rows:"2",for:"input-clocks"}},[e._v("Clocks")]),o("b-form-textarea",{attrs:{id:"input-clocks",type:"text"},model:{value:e.form.clocks,callback:function(t){e.$set(e.form,"clocks",t)},expression:"form.clocks"}})],1),o("b-form-group",[o("label",{staticClass:"float-left",attrs:{for:"input-description"}},[e._v("Description")]),o("b-form-textarea",{attrs:{rows:"5",id:"input-description",type:"text"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),o("b-form-group",[o("label",{staticClass:"float-left",attrs:{for:"input-turf"}},[e._v("Turf")]),o("b-form-textarea",{attrs:{rows:"3",id:"input-turf",type:"text"},model:{value:e.form.turf,callback:function(t){e.$set(e.form,"turf",t)},expression:"form.turf"}})],1),o("b-form-group",[o("label",{staticClass:"float-left",attrs:{for:"input-npcs"}},[e._v("NPCs")]),o("b-form-textarea",{attrs:{rows:"5",id:"input-npcs",type:"text"},model:{value:e.form.npcs,callback:function(t){e.$set(e.form,"npcs",t)},expression:"form.npcs"}})],1),o("b-form-group",[o("label",{staticClass:"float-left",attrs:{for:"input-assets"}},[e._v("Assets")]),o("b-form-textarea",{attrs:{rows:"5",id:"input-assets",type:"text"},model:{value:e.form.assets,callback:function(t){e.$set(e.form,"assets",t)},expression:"form.assets"}})],1),e.id?o("span",{staticClass:"float-left"},[o("b-button",{attrs:{variant:"outline-dark"},on:{click:e.onCancel}},[e._v("Cancel")])],1):e._e(),e.id?o("span",{staticClass:"float-right"},[o("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"}},[e._v("Save")]),o("b-button",{attrs:{variant:"outline-danger"},on:{click:e.onRemove}},[e._v("Remove")])],1):e._e(),e.id?e._e():o("span",{staticClass:"float-right"},[o("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"}},[e._v("Submit")]),o("b-button",{attrs:{variant:"outline-danger"},on:{click:e.onCancel}},[e._v("Cancel")])],1)],1)}),i=[],s=(o("45fc"),o("a9e3"),o("07ac"),o("5530")),c=(o("96cf"),o("1da1")),l={name:"NpcForm",props:{id:{type:Number,required:!1},axios:{url:String,method:String,data:Object}},watch:{id:{immediate:!0,handler:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{this.dirty&&window.confirm('You have unsaved changes. Click "ok" to discard changes.')&&(this.dirty=!1),this.dirty||(t?this.getById(t):this.clearForm(),this.dirty=!1)}catch(o){}return e.abrupt("return");case 2:case"end":return e.stop()}}),e,this)})));function t(t,o){return e.apply(this,arguments)}return t}()},blankForm:{immediate:!0,deep:!0,handler:function(e,t){}},form:{immediate:!0,handler:function(e){this.$emit("change",{form:e})}},dirty:{immediate:!0,handler:function(e,t){}}},data:function(){return{form:{},dirty:!1}},created:function(){this.clearForm()},computed:{formToApiData:function(){return this.form}},methods:{getById:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,t.$axios.request({method:"get",url:t.axios.url,params:{id:e}});case 3:r=o.sent,t.form=Object(s["a"])({},r.data[0]),o.next=9;break;case 7:o.prev=7,o.t0=o["catch"](0);case 9:case"end":return o.stop()}}),o,null,[[0,7]])})))()},onCancel:function(){this.$emit("cancel")},onChange:function(){this.dirty=!0},clearForm:function(){this.form=Object(s["a"])({},this.blankForm),this.dirty=!1},onRemove:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.request({method:"delete",url:e.axios.url+((null===(o=e.form)||void 0===o?void 0:o.id)?"/"+e.form.id:"")});case 3:t.sent,e.$emit("remove"),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},onSubmit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!Object.values(e.form).some((function(e){return!!e}))){t.next=10;break}return o=e.axios.url+(e.form.id?"/"+e.form.id:""),t.next=5,e.$axios.request({method:e.form.id?"put":"post",url:o,data:e.formToApiData});case 5:t.sent,e.$bvToast.toast("Submission submitted",{variant:"success"}),e.clearForm(),e.dirty=!1,e.$emit("submit",{form:e.form});case 10:t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})))()}}},u=l,d=o("2877"),m=Object(d["a"])(u,a,i,!1,null,null,null),f=m.exports,p=o("dad3"),h=o("9b95"),b=o.n(h),v={name:"FactionView",props:{id:{required:!1,default:void 0}},watch:{id:{immediate:!0,handler:function(e,t){this.selected_id=+e}},controlpressed:{immediate:!0,handler:function(e,t){}}},data:function(){return{selected_id:void 0,axios:{url:"faction",method:"get",data:{}},fields:[{key:"name",value:"Name",sortable:!0},{key:"prep",sortable:!0},{key:"claimed",sortable:!0}],tableFilter:"",form:{name:"",clocks:"",description:"",turf:"",npcs:"",assets:"",prep:!1,claimed:!1},controlpressed:!1,faction_info:b.a}},components:{FactionForm:f,ZTable:p["a"]},created:function(){},mounted:function(){document.title="Faction",window.addEventListener("keypress",this.onKeypress,!1),window.addEventListener("keydown",this.onKeydown,!1),window.addEventListener("keyup",this.onKeyup,!1)},beforeDestroy:function(){document.title="Marshbout",window.removeEventListener("keypress",this.onKeypress,!1),window.removeEventListener("keydown",this.onKeydown,!1),window.removeEventListener("keyup",this.onKeyup,!1)},methods:{onRowSelected:function(e){var t=e.row;this.selected_id=null===t||void 0===t?void 0:t.id},onCancel:function(){this.selected_id=void 0},onSubmit:function(){this.refreshList()},onRemove:function(){this.refreshList()},refreshList:function(){this.$refs.ztable.loadItems()},selectRandom:function(){this.$refs.ztable.selectRandom()},onKeydown:function(e){var t=e.keyCode;[17,18].includes(t)&&(this.controlpressed=!0)},onKeyup:function(e){var t=e.keyCode;[17,18].includes(t)&&(this.controlpressed=!1)},onKeypress:function(e){var t=e.key;try{this.controlpressed&&["i","I"].includes(t)&&this.$bvModal.show("info-modal")}catch(o){}}}},w=v,y=Object(d["a"])(w,r,n,!1,null,null,null);t["default"]=y.exports},"9b95":function(e,t){e.exports='<h1 id="factions">factions</h1>\n<h2 id="npc--faction-downtime">NPC &amp; faction downtime</h2>\n<p>NPCs and factions also do things when the PCs have downtime. The GM advances their project clocks and chooses a downtime maneuver or two for each faction that they’re interested in at the moment. Choose any maneuver that makes sense for that faction to pursue. For example:</p>\n<ul>\n<li>Seize a claim or increase hold, make an enemy vulnerable, or reduce the hold of a vulnerable enemy.</li>\n<li>Gather information on the PCs (may be opposed by a PC roll) or another subject.</li>\n<li>Achieve a short-term goal they’re in position to accomplish.</li>\n<li>Acquire a new asset.</li>\n<li>Call in a favor from another faction.</li>\n<li>Employ political pressure or threats to force someone’s hand.</li>\n</ul>\n<p>GM: Choose downtime maneuvers and advance clocks for the factions you’re interested in right now. Don’t worry about the rest. Later, when you turn your attention to a faction you’ve ignored for a while, go ahead and give them several downtime phases and project clock ticks to “catch up” to current events.</p>\n<p>If you’re not sure how far to progress a faction’s clock, make a fortune roll using their Tier as the base trait, modified up or down depending on the opposition or circumstances. Tick 1 segment for a 1-3 result, 2 segments for a 4/5 result, 3 segments for a 6 result, or 5 segments for a critical result.</p>\n<p>When factions do things that are known in the criminal underworld, <strong>tell the players about it through one of their friends or contacts or vice purveyors</strong>. These rumors and bits of gossip can lead to future scores and opportunities for the PCs.</p>\n'}}]);
//# sourceMappingURL=faction.b0c21486.js.map